<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Todo List</h1>

    <input type="text" id="nuevaTarea" placeholder="Escribir una tarea...">
    <button id="agregarBtn">Agregar tarea</button>

    <ul id="tareas"></ul>

    <h3>Cambios en el DOM</h3>
    <pre id="log"></pre>

    <script>
        const lista = document.getElementById("tareas");
        const input = document.getElementById("nuevaTarea");
        const log = document.getElementById("log");

        // Observer
        const observer = new MutationObserver(cambios => {
            cambios.forEach(c => {
                log.textContent += `\nCambio: en ${c.target.nodeName}\n`;
            });
        });

        observer.observe(lista, { childList: true, attributes: true });

        // Función para crear tarea
        function crearTarea(texto) {
            const li = document.createElement("li");

            // Texto de la tarea
            const span = document.createElement("span");
            span.textContent = texto;

            // Botones
            const acciones = document.createElement("div");
            acciones.className = "acciones";
            acciones.innerHTML = `
                <button class="completar">✔</button>
                <button class="eliminar">✖</button>
            `;

            // Agregar a la lista
            li.appendChild(span);
            li.appendChild(acciones);

            return li;
        }

        // Agregar nueva tarea
        document.getElementById("agregarBtn").addEventListener("click", () => {
            const valorAAgregar = input.value.trim();
            if (valorAAgregar !== "") {
                const nuevaTarea = crearTarea(valorAAgregar);
                lista.appendChild(nuevaTarea);
                input.value = "";
            }
        });

        //Delegacion de eventos
        lista.addEventListener("click", e => {
            if(e.target.classList.contains("eliminar")){
                e.target.closest("li").remove();
            }
            else if (e.target.classList.contains("completar")) {
                e.target.closest("li").classList.toggle("completada");
            }
        });

        //Log inicial
            log.textContent = "Todavia no se ha producido ningun cambio...";
    </script>
</body>
</html>
